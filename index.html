<!DOCTYPE html>
<html>
<head>
	<title>Postal - Create emails using ASP.NET MVC views</title>
    <link href="site.css" rel="stylesheet" type="text/css" />
    <meta name="description" content="Create emails using ASP.NET MVC views"/>
</head>
<body>
  <div id="wrap">
    <div id="header">
        <div class="inner">
            <h1>Postal</h1>
            <div id="header-links">
                <a id="download-link" href="https://github.com/downloads/andrewdavey/postal/postal-0.1.0.zip">Download</a>
                <a id="github-link" href="http://github.com/andrewdavey/postal">GitHub</a>
                <div id="social-media">
                    <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://aboutcode.net/postal" data-count="vertical" data-via="andrewdavey">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
                </div>
            </div>
        </div>
    </div>
    <div id="main">
        <div class="inner">

            <div class="section">
            <h2>Elevator Pitch</h2>
            <p>Does your web application use Microsoft <a href="http://www.asp.net/mvc">ASP.NET MVC</a>?</p>
            <p>Do you find generating emails to be a big bag of string concatenation fail?!</p>
            <p>Postal lets you <strong>create emails using regular MVC views</strong>.</p>
            </div>

            <div class="section">
            <h2>Simple Example</h2>
            <p>Here's the simplest way to use Postal:</p>
            <div class="code-sample code-sample-column">
            <h3>~\Controllers\HomeController.cs</h3>
<code>
<pre>public class HomeController : Controller {
    public ActionResult Index() {
        dynamic email = new Email("Example");
        email.To = "webninja@example.com";
        email.FunnyLink = DB.GetRandomLolcatLink();
        email.Send();

        return View();
    }
}</pre>
</code>
            </div>
            <div class="code-sample code-sample-column">
                <h3>~\Views\Email\Example.cshtml</h3>
<code>
<pre>To: @ViewBag.To
From: lolcats@website.com
Subject: Important Message

Hello,
You wanted important web links right?
Check out this: @ViewBag.FunnyLink

<3</pre>
</code>
            </div>
            <div style="clear:left"></div>
            <p>The name of the view, "Example", is passed to the Email object's constructor.</p>
            <p>The Email object creates a ViewDataDictionary to pass to the view. The view
            accesses the view data via the ViewBag dynamic object. 
            Notice the hip new <em>dynamic</em> Email object that makes the syntax nice
            in the controller code. (Don't worry you oldies, you can strongly type the email model if you must!)</p>
            <p>Postal puts the email headers into the actual view. Crazy?! Nope, I think
            it makes for a better separation of concerns actually.</p>
            <p>The view is using Razor syntax, but aspx should also work fine.</p>
            <p>Internally, Postal uses the .NET Framework's <a href="http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx">SmtpClient</a>.
            You can configure it's behavior in your web.config file.</p>
            <div class="code-sample">
                <h3>~\Web.config</h3>
            <code><pre>&lt;system.net&gt;
    &lt;mailSettings&gt;
        &lt;smtp deliveryMethod="SpecifiedPickupDirectory"&gt;
            &lt;specifiedPickupDirectory pickupDirectoryLocation="c:\email"/&gt;
            &lt;network host="localhost"/&gt;
        &lt;/smtp&gt;
    &lt;/mailSettings&gt;
&lt;/system.net&gt;</pre></code>
            </div>
            <div style="clear:left"></div>
            </div>

            <div class="section">
            <h2>Ready to "Go Postal"? ;)</h2>
            <p>Postal is available via <a href="http://nuget.org/">nuget</a>. 
            In Visual Studio, either do "Project &gt; Add Library Package Reference" and search for "postal"
            , or enter the following into the Package Manager Console:</p>
            <code class="command-line"><pre>Install-Package postal</pre></code>
            <p>Postal is a free, <a href="http://www.opensource.org/licenses/mit-license.php">open source</a>, library so 
            please <a href="http://github.com/andrewdavey/postal">fork it on GitHub</a>. Pull requests are welcome.</p>
            </div>

            <div class="section">
            <h2>But wait, there's more!</h2>
            <p>The example above is very basic. You might need to do more.</p>
            <ul>
                <li>Strongly type the Email object</li>
                <li>Mock out email sending code for testing</li>
                <li>Get the generated System.Net.Mail.MailMessage object</li>
                <li>Send email in both text and HTML formats</li>
            </ul>
            <p>You can do all this, but I've not written the docs yet! So contact me or see the examples
            in the <a href="https://github.com/andrewdavey/postal/tree/master/src/MvcSample">source code</a> for details.</p>
            </div>
        </div>
    </div>
    <div id="footer">
        <div class="inner">
            <h2>Credits</h2>
            <p>Postal was created by Andrew Davey.</p>
            <p>Show your support by following <a href="http://twitter.com/andrewdavey">Andrew on Twitter</a>
            or emailing andrew@equin.co.uk.</p>
            <p>For more wild theories and open source projects, <a href="http://aboutcode.net/">Read the Blog</a></p>
        </div>    
    </div>
  </div>

  <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-19461164-1");
pageTracker._trackPageview();
} catch(err) {}</script>

<script src="http://localhost:8001/vogue-client.js" type="text/javascript"></script>

</body>
</html>
